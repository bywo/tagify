{"version":3,"file":"static/webpack/static/development/pages/index.js.9a2fab98bcec5f340830.hot-update.js","sources":["webpack:///./components/TableRow.js"],"sourcesContent":["import _ from \"lodash\";\nimport React from \"react\";\nimport CreatableSelect from \"react-select/lib/Creatable\";\nimport { components } from \"react-select\";\nimport theme from \"../theme\";\n\nconst { MultiValue, SelectContainer } = components;\n\nexport default class TableRow extends React.Component {\n  state = { hover: false, menuOpen: false };\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (nextState.hover !== this.state.hover) {\n      return true;\n    }\n\n    const { track, tags, trackColWidth, artistColWidth } = this.props;\n    if (track.uri !== nextProps.track.uri) {\n      return true;\n    }\n\n    if (tags.length !== nextProps.tags.length) {\n      return true;\n    }\n\n    if (trackColWidth !== nextProps.trackColWidth) {\n      return true;\n    }\n\n    if (artistColWidth !== nextProps.artistColWidth) {\n      return true;\n    }\n\n    return false;\n  }\n\n  onMouseEnter = e => {\n    this.setState({ hover: true });\n  };\n\n  onMouseLeave = e => {\n    this.setState({ hover: false });\n  };\n\n  render() {\n    return (\n      <div\n        ref={el => (this.root = el)}\n        style={{\n          display: \"flex\",\n          borderBottom: `solid 1px ${theme.colors.background}`,\n          alignItems: \"flex-start\",\n          background: theme.colors.backgroundLighter,\n          color: theme.colors.darkTextHighEmphasis,\n          fontSize: theme.fontSizes.m,\n        }}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div\n          style={{\n            flexShrink: \"0\",\n            width: this.props.trackColWidth,\n            padding: theme.spacing.m,\n          }}\n        >\n          {this.props.track.name}\n        </div>\n        <div\n          style={{\n            flexShrink: \"0\",\n            width: this.props.artistColWidth,\n            padding: theme.spacing.m,\n          }}\n        >\n          {this.props.track.artists.map((a, index) => (\n            <span key={a.id}>\n              {a.name}\n              {index !== this.props.track.artists.length - 1 ? \", \" : null}\n            </span>\n          ))}\n        </div>\n        <div\n          style={{\n            flexGrow: \"1\",\n            padding: theme.spacing.m,\n          }}\n        >\n          {this.state.hover || this.state.menuOpen ? (\n            <CreatableSelect\n              isMulti\n              isSearchable\n              backspaceRemovesValue={false}\n              isClearable={false}\n              options={this.props.tagOptions}\n              value={this.props.tags}\n              onMenuOpen={() => {\n                this.setState({ menuOpen: true });\n              }}\n              onMenuClose={() => {\n                this.setState({ menuOpen: false });\n              }}\n              onChange={selectedOptions => {\n                /* this.props.cellMeasurerCache.clear(this.props.index); */\n                const added = _.difference(selectedOptions, this.props.tags);\n                const deleted = _.difference(this.props.tags, selectedOptions);\n                added\n                  .filter(option => option.__isNew__)\n                  .forEach(({ label }) => {\n                    console.log(\"creating createAndAddTag\");\n                    this.props.createAndAddTag(this.props.track.uri, label);\n                  });\n                added\n                  .filter(option => !option.__isNew__)\n                  .forEach(({ value: playlistId }) => {\n                    this.props.addTag(this.props.track.uri, playlistId);\n                  });\n                deleted.forEach(({ value: playlistId }) => {\n                  this.props.removeTag(this.props.track.uri, playlistId);\n                });\n              }}\n              styles={{\n                multiValue: (styles, { data }) => ({\n                  ...styles,\n                  backgroundColor: data.color,\n                }),\n                multiValueLabel: styles => ({\n                  ...styles,\n                  color: \"white\",\n                }),\n                multiValueRemove: styles => ({\n                  ...styles,\n                  color: \"white\",\n                }),\n              }}\n            />\n          ) : (\n            <div\n              style={{\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                alignItems: \"center\",\n                padding: \"2px 45px 2px 8px\",\n                border: \"solid 1px hsl(0,0%,80%)\",\n                borderRadius: \"4px\",\n                minHeight: 38,\n              }}\n            >\n              {this.props.tags.map(tag => (\n                <div\n                  key={tag.value}\n                  style={{\n                    borderRadius: \"2px\",\n                    color: \"white\",\n                    fontSize: \"85%\",\n                    overflow: \"hidden\",\n                    padding: \"3px 25px 3px 3px\",\n                    paddingLeft: \"6px\",\n                    textOverflow: \"ellipsis\",\n                    whiteSpace: \"nowrap\",\n                    boxSizing: \"border-box\",\n                    background: tag.color,\n                    margin: \"2px\",\n                  }}\n                >\n                  {tag.label}\n                </div>\n              ))}\n              <div style={{ padding: \"2px 0\", margin: \"2px\", width: 2 }}>\n                {`\\u2060`}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AAAA;AAAA;AAAA;AACA;AA0BA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;;;;AAhCA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAUA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AACA;AACA;AACA;AAHA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AAHA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAQA;AACA;AACA;AAFA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAFA;AAAA;AAIA;AAAA;AAEA;AAFA;AAAA;AAIA;AAAA;AAEA;AAFA;AAAA;AATA;AAhCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAoBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;;;;AAxKA;AACA;;;;;A","sourceRoot":""}